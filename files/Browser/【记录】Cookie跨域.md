**首先说明**

- 这个问题是：将 Cookie 传给跨域的接口中，简称 Cookie 跨域
- Cookie 默认是不可以跨域的
- 并不是从不同域名的网站里拿 Cookie

<img src="/my-blog/img/cookie.png" alt="来自其他博主" width="700" height="500">

- 谷歌浏览器新版本 Chrome 80 将 Cookie 的 SameSite 属性默认值由 None 变为 Lax。

这下就很清楚明了了，有两种解决方案：

1.  服务器端设置 Access-Control-Allow-Credentials
2.  将 Cookie 的 SameSite 值设为 None，Secure 值改为 true，并且升级为 https，我们就可以跨域使用 Cookie。
3.  将 Cookie 的 SameSite 值设为 Lax/Strict，并且将前后端部署在同一台服务器下，我们就可以在同一站点使用 Cookie。

    XMLHttpRequest.withCredentials = true

**注意：**
如果是本地测试想要前后端对接我们就只能使用方案一了
两种方案需要先解决浏览器同源策略也就是跨域问题

## 再解释一下，同域和同站，跨域和跨站

## 同域和同站

是两个与网站相关的概念。

**同域**（同一域名）指的是两个或多个网站共享相同的主域名，只是在主域名后面的路径或子域名部分有所区别。例如，www.example.com 和 blog.example.com 是同域的，因为它们共享相同的主域名 example.com，只是子域名不同。

**而同站**（同一站点）则是指在同一个网站上创建多个独立的子站点或页面。这些子站点或页面在功能、内容或布局上可以有所差异，但它们仍然属于同一个大的网站。同站通常使用相同的主域名，并在路径部分进行区分。例如，www.example.com 和 www.example.com/blog 是同站的，因为它们都属于同一个网站 example.com，只是路径不同。

**总结起来**，同域是指共享相同的主域名，而同站是指在同一个网站上创建多个独立的子站点或页面。

## 跨域（Cross-Origin）和跨站（Cross-Site）

是两个与网站安全性相关的概念。

**跨域**指的是在浏览器端，当一个网页的来源域（域名、协议或端口）与当前页面的域不一致时，浏览器会限制网页对其他域的访问。这是出于安全考虑，以防止恶意网站通过脚本等方式获取到用户的敏感信息。常见的跨域问题包括通过 JavaScript 发送 AJAX 请求、使用 iframe 加载其他域的内容等。

为了解决跨域问题，可以使用一些方法，如在服务器端设置响应头部信息（如 Access-Control-Allow-Origin）、使用代理服务器进行请求转发、跨域资源共享（CORS）等。

**跨站**则是指攻击者利用网站间的信任关系，通过在受攻击网站上注入恶意内容或脚本，从而获取用户敏感信息或进行其他恶意行为的一种攻击方式。跨站脚本攻击（XSS）和跨站请求伪造（CSRF）是常见的跨站攻击类型。

为了防止跨站攻击，开发者需要采取一些安全措施，如对用户输入进行过滤和转义、使用安全的会话管理机制、使用 CSRF 令牌等。

**总结起来**，跨域是指在浏览器端限制网页对其他域的访问，而跨站是指攻击者利用网站间的信任关系进行恶意攻击。

**摘抄自**：[大佬 lonelysnowman
](https://blog.csdn.net/lonelysnowman/article/details/128607318)
